<!doctype html>
<html lang="zh-CN" class="h-screen" :class="{'dark':dark}">
<head>
  <meta charset="UTF-8">
<meta name="theme-color" content="#fff" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#101827" media="(prefers-color-scheme: dark)">
<link rel="apple-touch-icon" href="./img/tx.jpg">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-touch-fullscreen" content="yes"/>
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="个人主页">
<meta name="format-detection" content="telephone=no,email=no"/>
  <meta name="viewport" content="width=device-width,user-scalable=no,viewport-fit=cover,initial-scale=1">
  <meta name="referrer" content="never">
  <title>个人主页</title>
    <link rel="stylesheet" href="./cssjs/mobilebone.css">
    <link rel="stylesheet" href="./cssjs/style.css?202210">
    <link href="./output.css" rel="stylesheet">
    <!--<script src="https://zezeshe.com/ui/js/3.0.24.js"></script>
<script>
tailwind.config = {
  darkMode: 'class',
}
</script>-->
</head>
<body x-data="data" class="relative min-h-full bg-white dark:bg-gray-700">
<aside class="fixed z-30 h-full w-12 md:w-16 flex flex-col items-center py-2.5 bg-amber-400 dark:bg-amber-500 font-semibold text-xs md:text-sm text-pink-600 overflow-y-auto"
>
<div><img src="./img/tx.jpg" class="w-8 h-8 md:w-10 md:h-10 rounded-full"></div>
<ul class="mt-5">
<li class="text-center mb-3"><a href="#home">
    <i class="flex items-center justify-center w-8 h-8 md:w-10 md:h-10 mb-1 rounded-full bg-white/60">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 stroke-2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z" />
</svg>
</i>
<div class="text-gray-900 dark:text-gray-100">主页</div></a>
</li>
<li class="text-center mb-3"><a href="#tuku">
    <i class="flex items-center justify-center w-8 h-8 md:w-10 md:h-10 mb-1 rounded-full bg-white/60"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 stroke-2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
</svg>
</i>
<div class="text-gray-900 dark:text-gray-100">图库</div></a>
</li>
<li class="text-center mb-3"><a href="#video">
    <i class="flex items-center justify-center w-8 h-8 md:w-10 md:h-10 mb-1 rounded-full bg-white/60"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 stroke-2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0118 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0118 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 016 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5" />
</svg>
</i>
<div class="text-gray-900 dark:text-gray-100">视频</div></a>
</li>
<li class="text-center mb-3"><a href="#item">
    <i class="flex items-center justify-center w-8 h-8 md:w-10 md:h-10 mb-1 rounded-full bg-white/60"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 stroke-2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" />
</svg></i>
<div class="text-gray-900 dark:text-gray-100">项目</div></a>
</li>
<li class="text-center mb-3"><a href="#setting">
    <i class="flex items-center justify-center w-8 h-8 md:w-10 md:h-10 mb-1 rounded-full bg-white/60"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 stroke-2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-2.25-2.25l3.276-3.276a4.5 4.5 0 00-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437l1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008z" />
</svg></i>
<div class="text-gray-900 dark:text-gray-100">设置</div></a>
</li>
</ul>
</aside>

<div id="container" class="relative ml-12 md:ml-16 h-full">
<div id="home" class="page out content" data-title="主页">
<link rel="import" :href="'./home.html?ver='+ver" is="ui-import">
</div>    
    
<div id="tuku" class="page out content" data-title="图库">
<link rel="import" :href="'./tuku.html?ver='+ver" is="ui-import">
</div>

<div id="video" class="page out" data-title="视频">
<link rel="import" :href="'./video.html?ver='+ver" is="ui-import">
</div>       
    
<div id="item" class="page out" data-title="项目">
<link rel="import" :href="'./item.html?ver='+ver" is="ui-import">
</div>        
    
<div id="setting" class="page out" data-title="设置">
<link rel="import" :href="'./setting.html?ver='+ver" is="ui-import">
</div>  
</div>


<script src="./cssjs/mobilebone.js"></script>
<script src="./cssjs/safari-polyfill.js"></script>
<script src="./cssjs/html-import.js"></script>
<script src="./cssjs/view-image.js?20220910"></script>
<script src="./cssjs/snowfall.js"></script>
<script src="./cssjs/main.js?202210"></script>

<script src="https://cdn.staticfile.org/alpinejs/3.10.3/cdn.min.js" defer></script>
<!-- snowwrap -->
<div id="snowwrap" class="fixed inset-0 w-full h-full hidden md:block" style="z-index: -1;"></div>
<script>

 
Mobilebone.callback = function(pageinto, pageout, options) {
var video = document.getElementById('player');
if(options.query&&options.query.type){
if(options.query.type=='tupage'){
    Alpine.store('tu').id=options.query.id;
    window.ViewImage && ViewImage.init('#photobox img');
}
if(options.query.type=='player'){
    Alpine.store('tu').mediaid=options.query.mediaid;
    Alpine.store('tu').seasonid=options.query.seasonid;
    Alpine.store('tu').bv=options.query.bv;
    Alpine.store('tu').title=decodeURI(options.query.title);
    document.title=decodeURI(options.query.title);
    Alpine.store('tu').pic=decodeURI(options.query.pic);
    if(options.query.back=='playlist'){
    Alpine.store('tu').back='javascript:';
    }
    //同级页面切换干掉之前页面的播放器
    //while(document.querySelectorAll("#player").length>0){
    //var video = document.getElementById('player');
    //if(video){video.remove();}console.info('测试');
    //}
}
if(options.query.type=='playlist'){   
    Alpine.store('tu').mediaid=options.query.mediaid;
    Alpine.store('tu').seasonid=options.query.seasonid;
    Alpine.store('tu').title=decodeURI(options.query.title);
    document.title=decodeURI(options.query.title);
    if(video){video.remove();console.info('进入列表销毁播放器');}
}
}
//console.info(options);
if(Mobilebone.isBack(pageinto, pageout)){
//返回时移出视频播放页面避免视频一直播放
if(video){video.remove();console.info('返回销毁播放器');}

}
    
}

document.addEventListener('alpine:init', () => {
    Alpine.data('data', () => ({
    tukuapi: 'https://zezeshe.com/api/bili/bizhi.php?uid=6823116&page=',//相册接口
    alltu:false,//图库全局列表
    ver:'20221001',//内部版本号
    version:'0.0.0',//版本号预设
    cache:'0',//刷新缓存递增变量
    dark:getThemeFromLocalStorage(),//返回默认模式
    darkMode(type='auto') { //手动切换
    if(type=='light'||type=='dark'){//记录手动设置参数，并修改全局变量
    localStorage.theme = type;if(type=='dark'){
        document.documentElement.classList.add('dark');
        this.dark=true;}else{
        document.documentElement.classList.remove('dark');
        this.dark=false;}
    }else{//删除手动设置参数，跟随系统
    localStorage.removeItem('theme');
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
    document.documentElement.classList.add('dark');
            this.dark = true;
    } else {
    document.documentElement.classList.remove('dark');
            this.dark = false;
    }}},
    
    init() {
fetch('./version.php').then(data => data.json()).then(data=>{
if(localStorage.cachenum){
this.cache=localStorage.cachenum;  
}else{
localStorage.cachenum=this.cache; 
}
var ver=data.ver+this.cache;
this.ver=ver;//ajax获取版本号
this.version=data.version;//ajax获取版本号

//下方为简约的热更新
if(localStorage.version&&localStorage.version!=ver){//对比版本号,不相等时则刷新数据
[].slice.call(document.querySelectorAll('.page')).forEach(function (page) {
    Mobilebone.remove(page);
});//清理缓存
localStorage.version=ver;//将版本号记录只长久存储里
location.reload();//刷新页面
}

localStorage.version=ver;//将版本号记录只长久存储里



});
    },
    
    }));
    
    Alpine.store('tu', {
    id:'',
    mediaid:false,
    seasonid:false,
    bv:'',
    pic:'',
    title:'',
    back:'#video',
    });
    
const mediaquery = window.matchMedia('(prefers-color-scheme: dark)');
function getThemeFromLocalStorage() {
if (localStorage.theme==='dark' || (!('theme' in localStorage) && mediaquery.matches)) {
document.documentElement.classList.add('dark');
return true;//如果cookie有则返回真
} else {
document.documentElement.classList.remove('dark');
return false;//如果cookie有则返回真
}
  }
mediaquery.addListener(getThemeFromLocalStorage);

//返回时移出视频播放页面避免视频一直播放
if(window.history && window.history.pushState){
window.addEventListener('popstate',function(){
var video = document.getElementById('player');
if(video){video.remove();console.info('返回');}
});
}

snowFall.snow(document.getElementById('snowwrap'), {
    image : ["img/hua/flake01_a.png",
    "img/hua/flake02_c.png",
    "img/hua/flake03_c.png",
    "img/hua/flake04_a.png",
    "img/hua/flake05_a.png",
    "img/hua/flake06_b.png"],
flakeColor:"#000",
shadow:false,
minSize:20,
maxSize:50,
flakeCount:20,
minspeed:0.2,
maxSpeed:1.5,
});

});
</script>
</body>
</html>
